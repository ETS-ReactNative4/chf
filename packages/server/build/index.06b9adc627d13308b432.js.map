{"version":3,"file":"index.cba88f76c67da661e007.hot-update.js","sources":["/Users/austinreynolds/Documents/MOD/chf-rcomm/packages/client/src/modules/home/components/PopularItemsCarousel.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { Badge, ResponsiveShpfyPicture, ResponsivePicture } from '../../common/components/global';\nimport '../styles/popular-items-carousel.scss';\n\nclass PopularItemsCarousel extends React.Component {\n  renderImage = image => {\n    const className = image.hasOwnProperty('className') ? image.className : '';\n    const options = {\n      image: image.link,\n      altText: image.name,\n      className,\n      image_size: '331X331',\n      sources: [\n        {\n          image: image.link,\n          image_size: '331X331',\n          size: '(min-width: 990px)'\n        }\n      ]\n    };\n    return <ResponsiveShpfyPicture options={options} />;\n  };\n  renderLogo = image => {\n    const className = image.hasOwnProperty('className') ? image.className : '';\n    const options = {\n      image: image.link,\n      altText: image.name,\n      className,\n      image_size: '331X331',\n      sources: [\n        {\n          image: image.link,\n          image_size: '331X331',\n          sizes: '(min-width: 990px) 331px'\n        }\n      ]\n    };\n    return <ResponsivePicture options={options} />;\n  };\n  firstImg = node => node.images.edges[0].node;\n  getPrice = node => node.variants.edges[0].node.price;\n  getCompareAtPrice = node => node.variants.edges[0].node.compareAtPrice;\n  getDisplayPrice = input =>\n    parseInt(input)\n      .toFixed(2)\n      .replace(/\\d(?=(\\d{3})+\\.)/g, '$&,');\n  vendorLogo = vendorName => {\n    const formatVendor = name => {\n      return name.replace(/[\\s/-]/g, '').toLowerCase();\n    };\n    const { vendors } = this.props;\n    const [match] = vendors.filter(v => formatVendor(v.name) === formatVendor(vendorName));\n    return match.logo_url;\n  };\n  toUrlName = str => str.replace(/(\\s\\/\\s|\\/|\\s|_)/gi, '-').toLowerCase();\n  productLocation = ({ handle, title, productType, vendor }) => {\n    const vendorName = vendor\n      .split(' ')\n      .join('-')\n      .toLowerCase();\n    // console.log('NODE :::', title);\n\n    return {\n      pathname: `/product/${vendorName}/${title\n        .split(' ')\n        .join('-')\n        .toLowerCase()}/${productType.toLowerCase()}`,\n      state: handle,\n      search: `handle=${handle}`\n    };\n  };\n  render() {\n    const { products } = this.props;\n    return (\n      <div className=\"popular-items-carousel\">\n        {products && products.edges.length > 0 ? (\n          products.edges.map(({ node }) => (\n            <Link key={node.id} to={this.productLocation(node)} className=\"popular-items-carousel__item\">\n              <div className=\"popular-items-carousel__item-image\">\n                {this.renderImage({ link: this.firstImg(node).originalSrc, name: this.firstImg(node).altText })}\n                {/* <img alt={this.firstImg(node).altText} src={this.firstImg(node).originalSrc} /> */}\n                {this.getCompareAtPrice(node) !== null ? <Badge badgeType=\"sale\" /> : null}\n              </div>\n              {this.renderLogo({\n                link: this.vendorLogo(node.vendor),\n                name: node.vendor,\n                className: 'popular-items-carousel__vendor-image'\n              })}\n              {/* <img\n                alt={node.vendor}\n                src={this.vendorLogo(node.vendor) || 'https://via.placeholder.com/200x100'}\n                className=\"popular-items-carousel__vendor-image\"\n              /> */}\n              <h3 className=\"popular-items-carousel__item-name\">{node.title}</h3>\n              {this.getCompareAtPrice(node) !== null ? (\n                <div className=\"popular-items-carousel__item-price-group\">\n                  <div className=\"popular-items-carousel__item-price popular-items-carousel__item-price--original\">\n                    ${this.getDisplayPrice(this.getCompareAtPrice(node))}\n                  </div>\n                  <div className=\"popular-items-carousel__item-price popular-items-carousel__item-price--sale\">\n                    ${this.getDisplayPrice(this.getPrice(node))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"popular-items-carousel__item-price\">${this.getDisplayPrice(this.getPrice(node))}</div>\n              )}\n            </Link>\n          ))\n        ) : (\n          <span>No popular item(s) to display</span>\n        )}\n      </div>\n    );\n  }\n}\n\nPopularItemsCarousel.propTypes = {\n  products: PropTypes.object,\n  vendors: PropTypes.array\n};\n\nexport default PopularItemsCarousel;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AANA;AAaA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AANA;AAaA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAKA;AACA;AACA;AAHA;AACA;AADA;AAKA;AAAA;AALA;AAAA;AACA;AAKA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AACA;AACA;AAIA;AACA;AANA;AAQA;;;;;AACA;AAAA;AACA;AADA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAUA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAGA;AAAA;AAAA;AAAA;AACA;AADA;AAJA;AASA;AAAA;AAAA;AAAA;AAAA;AA3BA;AADA;AAiCA;AAAA;AAAA;AAAA;AAnCA;AAuCA;;;;AA7GA;AACA;AA+GA;AACA;AACA;AAFA;AACA;AAIA;;;;A","sourceRoot":""}