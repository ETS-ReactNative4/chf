{"version":3,"file":"index.c410f9c9ed3a0e802da0.hot-update.js","sources":["/Users/austinreynolds/Documents/MOD/chf-rcomm/packages/client/src/modules/admin/components/SiteMap/index.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { paramsApplier as applyParams } from 'react-router-sitemap';\n\nimport PRODUCTS_QUERY from '../../graphql/SiteMapProds.graphql';\n\n// const paths = ['/products/:category', '/products/brands/:vendor_name', '/product/:vendor_name/:product_name/:category']\n\nexport default class SiteMapGenerator extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  componentDidMount() {\n    console.log('THIS SITE MAP PROPS::', this.props);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    console.log('UPDATE PROPS::', this.props);\n    console.log('UPDATE PREV PROPS:', prevProps);\n  }\n  generateSiteMap = async () => {\n    const products = await this.getAllProducts();\n    // const generated = await this.props.createSiteMap();\n    // console.log('GENERATED::', generated);\n  };\n  getAllProducts = async () => {\n    const { currEndCursor } = this.props.products;\n    // console.log('THE END CURSOR::', currEndCursor);\n    const {\n      data: {\n        admin_products: { pageInfo }\n      }\n    } = await this.props.loadMore(250, currEndCursor);\n    if (pageInfo.hasNextPage) {\n      return this.getAllProducts();\n    } else {\n      // console.log('THE PROPS;:::', this.props.admin_products);\n      const { edges } = this.props.admin_products;\n      // console.log('EDGES::', edges);\n      this.generateProductsConfig(edges);\n    }\n  };\n  generateProductsConfig = async products => {\n    const path = ['/product/:vendor_name/:product_name/:category'];\n    // console.log('PRODUCTS::', products);\n    const pathFormater = string =>\n      string\n        .split(' ')\n        .join('-')\n        .toLowerCase();\n    const configReducer = (data, config) => {\n      return data.reduce((accum, { node }) => {\n        let _accum = config(node, accum);\n        accum = [...accum, _accum];\n        return accum;\n      }, []);\n    };\n    // const singleProductConfig = products.reduce((accum, { node }) => {\n    //   // console.log('CURR::', node);\n    //   accum = [\n    //     ...accum,\n    //     { vendor_name: pathFormater(node.vendor), product_name: node.handle, category: pathFormater(node.productType) }\n    //   ];\n    //   // console.log('ACCUM LENGTH', accum, accum.length);\n    //   return accum;\n    // }, []);\n    const vendorConfig = async data => {\n      let config = [];\n      await configReducer(data, (node, accum) => {\n        const vendor = {\n          vendor_name: pathFormater(node.vendor)\n        };\n        console.log('CONFIG::', accum);\n\n        return vendor;\n      });\n      // console.log('CONFIG:::::', config);\n      return config;\n    };\n    const result = await vendorConfig(products);\n    console.log('VENDOR CONFIG::', result);\n    // const config = {\n    //   '/product/:vendor_name/:product_name/:category': singleProductConfig\n    // };\n    // const paths = applyParams(path, config);\n    // console.log('PATHS::', config);\n  };\n  render() {\n    const { productsLoading, admin_products } = this.props;\n    console.log('ADMIN PRODUCTS::', admin_products);\n\n    return (\n      <section>\n        <div>SiteMap</div>\n        <button onClick={this.generateSiteMap}>Create Site Map</button>\n      </section>\n    );\n  }\n}\nSiteMapGenerator.propTypes = {\n  createSiteMap: PropTypes.func,\n  admin_products: PropTypes.object,\n  productsLoading: PropTypes.bool\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AAgBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AACA;AADA;AAAA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAWA;AACA;AACA;AACA;AAAA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAjBA;AAAA;AAiCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAxBA;AAwBA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAzBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAqCA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAlCA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAGA;AACA;;;AAAA;AACA;AACA;;;AACA;AACA;AACA;AACA;;;AAoEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAKA;;;;AAzFA;AACA;AADA;AACA;AA0FA;AACA;AACA;AACA;AAHA;;;;A","sourceRoot":""}