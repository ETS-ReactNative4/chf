{"version":3,"file":"index.8c33652ac9f57faf446b.hot-update.js","sources":["/Users/austinreynolds/Documents/MOD/chf-rcomm/packages/client/src/modules/admin/containers/Dashboard.jsx"],"sourcesContent":["/*eslint-disable no-unused-vars*/\nimport React from 'react';\nimport { graphql, compose, withApollo } from 'react-apollo';\nimport ManageAdmins from '../../profile/components/ManageAdmins';\nimport SiteMap from '../components/SiteMap';\nimport AdminView from '../components/AdminView';\nimport PRODUCTS_QUERY from '../graphql/SiteMapProds.graphql';\nimport UPLOAD_CONTENT from '../graphql/UploadContent.graphql';\nimport SIMPLE_PAGE_QUERY from '../graphql/SimplePageQuery.graphql';\nimport DEALERS_QUERY from '../graphql/Dealers.graphql';\nimport DEALER_BY_HANDLE_QUERY from '../graphql/DealerQuery.graphql';\nimport UPDATE_DEALER from '../graphql/UpdateDealer.graphql';\n\nclass Admin extends React.Component {\n  render() {\n    // console.log('The props::::', this.props);\n    return (\n      <AdminView {...this.props}>\n        <SiteMap />\n        <ManageAdmins {...this.props} />\n      </AdminView>\n    );\n  }\n}\n\nconst AdminWithApollo = compose(\n  graphql(PRODUCTS_QUERY, {\n    options: () => ({\n      variables: { first: 250 }\n    }),\n    props: ({ data }) => {\n      console.log('DATA;::', data);\n      const { loading, error, admin_products, variables, fetchMore } = data;\n      if (error) {\n        throw new Error(error);\n      }\n      if (loading) {\n        return { productsLoading: loading };\n      }\n      if (!loading && admin_products) {\n        let currEndCursor;\n        let hasNextPage;\n        let hasPreviousPage;\n        const { edges } = admin_products;\n        if (edges.length > 0) {\n          currEndCursor = edges[edges.length - 1].cursor;\n        }\n        hasNextPage = admin_products.pageInfo.hasNextPage;\n        hasPreviousPage = admin_products.pageInfo.hasPreviousPage;\n        console.log('Curr end cursor::', currEndCursor);\n        const loadMore = (first = 50, after = currEndCursor) => {\n          const updatedVars = { ...variables, after, first };\n          console.log('UPDATED VARS::', updatedVars);\n          return fetchMore({\n            variables: updatedVars,\n            updateQuery: (prevResult, { fetchMoreResult }) => {\n              console.log('PREVRESULT:', prevResult);\n              if (fetchMoreResult.admin_products.edges.length === 0) return prevResult;\n              const updatedResult = JSON.parse(JSON.stringify(prevResult));\n              console.log('PREV RESULT STRING', updatedResult);\n              // const updatedResult = Object.assign({}, prevResult);\n              updatedResult.admin_products.edges = [\n                ...prevResult.admin_products.edges,\n                ...fetchMoreResult.admin_products.edges\n              ];\n              //\n              updatedResult.pageInfo = fetchMoreResult.admin_products.pageInfo;\n              // updatedResult.admin_products.pageInfo = fetchMoreResult.admin_products.pageInfo;\n              // console.log('udpatedres', updatedResult);\n              // const update = Object.assign({}, prevResult, {\n              //   admin_products: {\n              //     edges: [...prevResult.admin_products.edges, ...fetchMoreResult.admin_products.edges],\n              //     pageInfo: fetchMoreResult.admin_products.pageInfo\n              //     // __typename: prevResult.admin_products.__typename\n              //   },\n              //   __typename: prevResult.admin_products.__typename\n              // });\n              console.log('UPDATE::', updatedResult);\n              return updatedResult;\n            }\n          });\n        };\n        return {\n          productsLoading: loading,\n          admin_products,\n          loadMore,\n          products: {\n            currEndCursor,\n            hasNextPage,\n            hasPreviousPage\n          }\n        };\n      }\n    }\n  })\n)(Admin);\n\nexport default AdminWithApollo;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAKA;;;;AATA;AACA;AAWA;AAEA;AAAA;AACA;AADA;AAAA;AAGA;AAAA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;AA4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAJA;AAUA;AACA;AAnEA;AACA;AAsEA;;;;;;;;;;;A","sourceRoot":""}