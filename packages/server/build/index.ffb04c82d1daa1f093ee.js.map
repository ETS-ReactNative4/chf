{"version":3,"file":"index.794b97051d27706177de.hot-update.js","sources":["/Users/austinreynolds/Documents/MOD/chf-rcomm/packages/client/src/modules/user/index.web.jsx","src/modules/dealers/resolvers.js"],"sourcesContent":["import React from 'react';\nimport { CookiesProvider } from 'react-cookie';\nimport { NavLink, withRouter } from 'react-router-dom';\n\nimport translate from '../../i18n';\nimport access from './access';\nimport resolvers from './resolvers';\nimport resources from './locales';\n// import ProfileView from './components/ProfileView';\nimport { MenuItem } from '../../modules/common/components/web';\n// import Users from './containers/Users';\n// import UserEdit from './containers/UserEdit';\n// import UserAdd from './containers/UserAdd';\nimport Register from './containers/Register';\nimport Login from './containers/Login';\n// import ForgotPassword from './containers/ForgotPassword';\n// import ResetPassword from './containers/ResetPassword';\n\nimport { AuthRoute, IfLoggedIn, IfNotLoggedIn, /*withLoadedUser,*/ withLogout } from './containers/Auth';\n\nimport Feature from '../connector';\n\n// const ProfileName = withLoadedUser(\n//   ({ currentUser }) => (currentUser ? currentUser.fullName || currentUser.username : null)\n// );\n\nconst LogoutLink = withRouter(\n  withLogout(({ logout, history }) => (\n    <a\n      href=\"javascript:void(0)\"\n      onClick={e => {\n        e.preventDefault();\n        (async () => {\n          await logout();\n          history.push('/');\n        })();\n      }}\n      className=\"nav-link\"\n    >\n      Logout\n    </a>\n  ))\n);\n\nexport * from './containers/Auth';\n\nconst NavLinkUsersWithI18n = translate('user')(({ t }) => (\n  <NavLink to=\"/users\" className=\"nav-link\" activeClassName=\"active\">\n    {t('navLink.users')}\n  </NavLink>\n));\nconst NavLinkLoginWithI18n = translate('user')(({ t }) => (\n  <NavLink to=\"/login\" className=\"nav-link\" activeClassName=\"active\">\n    {t('navLink.sign')}\n  </NavLink>\n));\n\nexport default new Feature(access, {\n  route: [\n    // <AuthRoute exact path=\"/profile\" role={['user', 'admin']} redirect=\"/login\" component={ProfileView} />,\n    // <AuthRoute exact path=\"/users\" redirect=\"/profile\" role=\"admin\" component={Users} />,\n    // <AuthRoute exact path=\"/users/new\" role={['admin']} component={UserAdd} />,\n    // <AuthRoute path=\"/users/:id\" redirect=\"/profile\" role={['user', 'admin']} component={UserEdit} />,\n    <AuthRoute exact path=\"/register\" redirectOnLoggedIn redirect=\"/admin/dashboard\" component={Register} />,\n    <AuthRoute\n      exact\n      path=\"/admin/login\"\n      redirectOnLoggedIn\n      redirect=\"/admin/dashboard\"\n      component={withRouter(({ history }) => (\n        <Login onLogin={() => history.push('/admin/dashboard')} />\n      ))}\n    />,\n    // <AuthRoute exact path=\"/forgot-password\" redirectOnLoggedIn redirect=\"/profile\" component={ForgotPassword} />,\n    // <AuthRoute exact path=\"/reset-password/:token\" redirectOnLoggedIn redirect=\"/profile\" component={ResetPassword} />\n  ],\n  // navItem: [\n  //   <IfLoggedIn key=\"/users\" role=\"admin\">\n  //     <MenuItem>\n  //       <NavLinkUsersWithI18n />\n  //     </MenuItem>\n  //   </IfLoggedIn>\n  // ],\n  // navItemRight: [\n  //   // <IfLoggedIn key=\"/profile\">\n  //   //   <MenuItem>\n  //   //     <NavLink to=\"/profile\" className=\"nav-link\" activeClassName=\"active\">\n  //   //       <ProfileName />\n  //   //     </NavLink>\n  //   //   </MenuItem>\n  //   // </IfLoggedIn>,\n  //   <IfLoggedIn key=\"/logout\">\n  //     <MenuItem>\n  //       <LogoutLink />\n  //     </MenuItem>\n  //   </IfLoggedIn>,\n  //   <IfNotLoggedIn key=\"/login\">\n  //     <MenuItem>\n  //       <NavLinkLoginWithI18n />\n  //     </MenuItem>\n  //   </IfNotLoggedIn>\n  // ],\n  resolver: resolvers,\n  localization: { ns: 'user', resources },\n  // eslint-disable-next-line react/display-name\n  rootComponentFactory: req => (req ? <CookiesProvider cookies={req.universalCookies} /> : <CookiesProvider />)\n});\n","const defaultDealer = {\n  id: '0',\n  handle: '',\n  name: ' ',\n  street: ' ',\n  suite: ' ',\n  city: ' ',\n  zip: ' ',\n  state: ' ',\n  country: ' ',\n  email: ' ',\n  phone: null,\n  website: ' ',\n  lat: ' ',\n  lng: ' '\n};\n/*eslint-disable no-unused-vars*/\nexport default pubsub => ({\n  Query: {\n    async dealers(obj, { first, after }, { Dealers }) {\n      const edgesArray = [];\n      console.log('AFTER::', after);\n      try {\n        const dealers = await Dealers.get.dealers(first, after);\n        console.log('DEALERS', dealers);\n        const updated = dealers.hasOwnProperty('isUpdated');\n        console.log('UPDATED::', updated);\n        const edgesArray = [];\n        dealers.map((dealer, idx) => edgesArray.push({ cursor: after + idx, node: dealer }));\n        const endCursor = edgesArray.length > 0 ? edgesArray[edgesArray.length - 1].cursor : 0;\n        const dealers_count = edgesArray.length;\n        const hasNextPage = dealers_count > after + first;\n\n        if (updated) {\n          return {\n            dealers_count,\n            edges: edgesArray,\n            dealer_info: { hasNextPage, end_cursor: endCursor }\n          };\n        } else if (dealers.length == 0) {\n          console.log('LENGTH WAS ZERO::', dealers);\n          return {\n            dealers_count,\n            edges: edgesArray,\n            dealer_info: { hasNextPage, end_cursor: endCursor }\n          };\n        }\n        console.log('WE SHOULD HIT HERE::', dealers);\n        console.log('DEALERS IN ELSE BLOCK;', edgesArray);\n        return {\n          dealers_count,\n          edges: edgesArray,\n          dealer_info: { hasNextPage, end_cursor: endCursor }\n        };\n      } catch (e) {\n        console.log('ERROR ON DEALERS:', e);\n      }\n    },\n    async dealerByHandle(obj, input, { Dealers }) {\n      try {\n        const handle = input.handle;\n        const dealer = await Dealers.get.dealerByHandle({ handle });\n\n        if (typeof dealer == 'undefined' || !dealer) {\n          console.log('DEALER IF', defaultDealer);\n          return defaultDealer; //{ dealerByHandle: defaultDealer };\n        }\n        console.log('WHY RETURN HERE YET::', dealer);\n        return { dealerByHandle: dealer };\n      } catch (e) {\n        console.log('ERR GETTING DEALER:', e);\n        return e;\n      }\n    }\n  },\n  Mutation: {\n    async addDealer(obj, { dealer }, { Dealers }) {\n      const data = dealer;\n      try {\n        const dealer = await Dealers.insertOrUpdate.updateDealer(data);\n        console.log('ADD DEALER::', dealer);\n      } catch (e) {\n        console.log('ERROR ADDING DEALER', e);\n      }\n    },\n    async updateDealer(obj, { dealer }, { Dealers }) {\n      const data = dealer;\n      try {\n        console.log('UPDATE DEALER INPUT::', data);\n\n        const dealer = await Dealers.insertOrUpdate.updateDealer(data);\n        console.log('DEALER RETURN ::', dealer);\n        return dealer;\n      } catch (e) {\n        console.log('ERROR::', e);\n      }\n    }\n  },\n  Subscription: {}\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AATA;AAAA;AAAA;AADA;AACA;AAgBA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AADA;AADA;AAKA;AAAA;AAAA;AACA;AAAA;AACA;AADA;AADA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AADA;AALA;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAhDA;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAgBA;AACA;AAAA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAFA;AAAA;AAAA;AACA;AADA;AAIA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAbA;AAAA;AAAA;AAAA;AACA;AADA;AAgBA;AACA;AACA;AAHA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AACA;AAoBA;AArBA;AAuBA;AACA;AACA;AAHA;AACA;AAvBA;AA4BA;AACA;AA7BA;AA+BA;AACA;AACA;AAHA;AACA;AA/BA;AAAA;AAAA;AACA;AAmCA;AACA;AArCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsCA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAFA;AAAA;AACA;AADA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AAKA;AANA;AACA;AADA;AASA;AATA;AACA;AADA;AAAA;AAAA;AACA;AAWA;AAZA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AAvDA;AAyDA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AAJA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AAEA;AACA;AAJA;AAAA;AACA;AADA;AAKA;AACA;AAAA;AANA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AArBA;AAuBA;AAjFA;AAAA;;;;A","sourceRoot":""}