{"version":3,"file":"index.abbac738175a09a16c29.hot-update.js","sources":["/Users/austinreynolds/Documents/MOD/chf-rcomm/packages/client/src/modules/admin/components/SiteMap/index.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { paramsApplier as applyParams } from 'react-router-sitemap';\n\nimport PRODUCTS_QUERY from '../../graphql/SiteMapProds.graphql';\n\n// const paths = ['/products/:category', '/products/brands/:vendor_name', '/product/:vendor_name/:product_name/:category']\n\nexport default class SiteMapGenerator extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n  componentDidMount() {\n    console.log('THIS SITE MAP PROPS::', this.props);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    console.log('UPDATE PROPS::', this.props);\n    console.log('UPDATE PREV PROPS:', prevProps);\n  }\n  generateSiteMap = async () => {\n    const products = await this.getAllProducts();\n    // const generated = await this.props.createSiteMap();\n    // console.log('GENERATED::', generated);\n  };\n  getAllProducts = async () => {\n    const { currEndCursor } = this.props.products;\n    // console.log('THE END CURSOR::', currEndCursor);\n    const {\n      data: {\n        admin_products: { pageInfo }\n      }\n    } = await this.props.loadMore(250, currEndCursor);\n    if (pageInfo.hasNextPage) {\n      return this.getAllProducts();\n    } else {\n      // console.log('THE PROPS;:::', this.props.admin_products);\n      const { edges } = this.props.admin_products;\n      // console.log('EDGES::', edges);\n      this.generateProductsConfig(edges);\n    }\n  };\n  generateProductsConfig = async products => {\n    const path = ['/product/:vendor_name/:product_name/:category'];\n    // console.log('PRODUCTS::', products);\n    const pathFormater = string =>\n      string\n        .split(' ')\n        .join('-')\n        .toLowerCase();\n    const configReducer = (data, config) => {\n      return data.reduce((accum, { node }) => {\n        accum = [...accum, config(node, accum)];\n        return accum;\n      }, []);\n    };\n    const singleProductConfig = products.reduce((accum, { node }) => {\n      // console.log('CURR::', node);\n      accum = [\n        ...accum,\n        { vendor_name: pathFormater(node.vendor), product_name: node.handle, category: pathFormater(node.productType) }\n      ];\n      // console.log('ACCUM LENGTH', accum, accum.length);\n      return accum;\n    }, []);\n    const vendorConfig = async data => {\n      let config = [];\n      await configReducer(data, (node, accum) => {\n        const vendor = {\n          vendor_name: pathFormater(node.vendor)\n        };\n        if (accum.length > 0) {\n          // console.log('accuMMMM: ', accum);\n          accum.map(({ vendor_name }) => {\n            if (config.length == 0) {\n              console.log('LENGTH IS ZEROO');\n              config.push(vendor);\n            } else {\n              // console.log('CONFIG :::: HEREOOOO', config);\n              config.map(config => {\n                if (config.vendor_name == vendor_name) {\n                  return;\n                } else {\n                  config = [...config, vendor];\n                }\n              });\n            }\n          });\n        }\n        return vendor;\n      });\n      console.log('CONFIG:::::', config);\n      return config;\n    };\n    const result = await vendorConfig(products);\n    console.log('VENDOR CONFIG::', result);\n    const config = {\n      '/product/:vendor_name/:product_name/:category': singleProductConfig\n    };\n    // const paths = applyParams(path, config);\n    // console.log('PATHS::', config);\n  };\n  render() {\n    const { productsLoading, admin_products } = this.props;\n    console.log('ADMIN PRODUCTS::', admin_products);\n\n    return (\n      <section>\n        <div>SiteMap</div>\n        <button onClick={this.generateSiteMap}>Create Site Map</button>\n      </section>\n    );\n  }\n}\nSiteMapGenerator.propTypes = {\n  createSiteMap: PropTypes.func,\n  admin_products: PropTypes.object,\n  productsLoading: PropTypes.bool\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AADA;AACA;AADA;AACA;AADA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AAgBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AACA;AADA;AAAA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAWA;AACA;AACA;AACA;AAAA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAjBA;AAAA;AAiCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAvBA;AAuBA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AADA;AAGA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;AA0BA;AA1BA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAxBA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAoDA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AA3DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAlCA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAGA;AACA;;;AAAA;AACA;AACA;;;AACA;AACA;AACA;AACA;;;AAmFA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAKA;;;;AAxGA;AACA;AADA;AACA;AAyGA;AACA;AACA;AACA;AAHA;;;;A","sourceRoot":""}